{% extends "base.html" %}

{% block title %}Légumes, espèces et variétés{% endblock %}

{% block javascript %}
<script type="text/javascript">function  init() {}</script>
{% endblock %}

{% block content %}

<div class="BlueFrame" style="list-style-type: none;width: 50%; margin-left: 3%">

<form action="" method="POST">
{% csrf_token %}

{{info}}
<h2>Légumes</h2><hr />
{% for leg in l_legumes %}
 
      <table>
          <tr>
          {% if leg.image %}<td><img style="float:left;width: 80px;height: 80px;margin: 10px" src="{{MEDIA_URL}}{{var.image}}" title="{{var.nom}}" /></td>{% endif %}
          <td><h2>{{leg.nom|title}}</h2>
            <p>famille : {{leg.espece.famille.nom|title}} ; espèce : {{leg.espece.nom|title}}</p>
            
            Distance dans le rang (cm) <input style="width:40px" type="text" name="leg_{{leg.pk}}_intra_rang_cm" value="{{leg.intraRang_cm}}" />
            Unité 
            <select id="leg_{{leg.pk}}_nomUniteProd" name="leg_{{leg.pk}}_nomUniteProd" >
                {% for idUp, nomUp in d_up.items %}
                    <option value="{{id}}" id="leg_{{leg.pk}}_upid_{{idUp}}" name="leg_{{leg.pk}}_upid_{{idUp}}" {% if leg.espece.unite_prod == idUp %}selected{% endif %}>{{nomUp}}</option>
                {% endfor %}
            </select>
            Poids moyen par pièce(kg) si comptage en pièce <input style="width: 40px" type="text" name="leg_{{leg.pk}}_poidsParPiece_kg" value="{{leg.poidsParPiece_kg}}" /> <br/>
            Production par pied(kg) <input style="width: 40px" type="text" name="leg_{{leg.pk}}_prodParPied_kg" value="{{leg.prodParPied_kg}}" /> <br/>
            Consommation hebdo par panier : <input style="width: 40px" type="text" name="leg_{{leg.pk}}_consoHebdo" value="{{leg.espece.consoHebdoParPart}}" /><br/>
            Rendement germination <input style="width:40px" type="text" name="leg_{{leg.pk}}_rendementGermination" value="{{leg.espece.rendementGermination}}" />
            Nb graines par pied <input style="width: 40px" type="text" name="leg_{{leg.pk}}_nbGrainesParPied" value="{{leg.espece.nbGrainesParPied}}" /> <br/>

            {% if leg.espece.avec.distinct %} <img src="{{ STATIC_URL }}images/smileyOK.jpg" width="32px" height="32px"  title="Avec"/> 
            {% for varAvec in leg.espece.avec.distinct %}{{varAvec.nom|title}}, {% endfor %} <br/>
            {% endif %}
          
            {% if leg.espece.sans.distinct %} <img src="{{ STATIC_URL }}images/smileyKO.jpg" width="32px" height="32px"  title="Sans"/>
            {% for varSans in leg.espece.sans.distinct %}{{varSans.nom|title}}, {% endfor %} <br/>
            {% endif %}
            <br/>
            <input style="margin-left: 20px" type="submit" value="Sauver"/>
            </td>
          </tr>

      </table>
      
	<hr />
{% endfor %}
</form>
</div>


<ul class="BlueFrame" style="list-style-type: none;">
<h2>Familles et variétés</h2><hr/>
{% for f in l_fams %}
  <li><b>{{f.nom|title}}</b>
	<ul>
	{% for esp in f.especes %}
	   <li>{{esp.nom|title}}</li>
	{% endfor %}
	</ul>
  
  </li>
  
{% endfor %}
</ul>


{% endblock %}
